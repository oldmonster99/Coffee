{"version":3,"sources":["webpack:///./src/views/SelectAddress.vue?e792","webpack:///./src/views/SelectAddress.vue?abae","webpack:///src/views/SelectAddress.vue","webpack:///./src/views/SelectAddress.vue?fb78","webpack:///./src/views/SelectAddress.vue","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","aa","on","goConfirmOrder","list","switchable","goAddAddressPage","edit","selectaddress","model","value","callback","$$v","chosenAddressId","expression","staticRenderFns","name","data","sids","aid","created","getfindAddress","$route","query","methods","$router","push","axios","method","url","params","tokenString","item","component","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error"],"mappings":"kHAAA,W,2CCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQN,KAAKO,GAAK,OAAS,OAAO,YAAY,KAAK,aAAa,IAAIC,GAAG,CAAC,aAAaT,EAAIU,kBAAkBN,EAAG,MAAM,CAACE,YAAY,oBAAoBF,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,mBAAmB,CAACG,MAAM,CAAC,KAAOP,EAAIW,KAAK,WAAaX,EAAIY,WAAW,mBAAmB,MAAMH,GAAG,CAAC,IAAMT,EAAIa,iBAAiB,KAAOb,EAAIc,KAAK,OAASd,EAAIe,eAAeC,MAAM,CAACC,MAAOjB,EAAmB,gBAAEkB,SAAS,SAAUC,GAAMnB,EAAIoB,gBAAgBD,GAAKE,WAAW,sBAAsB,MAAM,IACxqBC,EAAkB,GC+BtB,G,oBAAA,CACEC,KAAM,gBACNC,KAFF,WAGI,MAAO,CAELJ,gBAAiB,EAGjBT,KAAM,GAGNC,YAAY,EASZa,KAAM,GAGNC,IAAK,GAGLlB,GAAI,KAGRmB,QA7BF,WA+BI1B,KAAK2B,iBASL3B,KAAKwB,KAAOxB,KAAK4B,OAAOC,MAAML,KAC9BxB,KAAKO,GAAKP,KAAK4B,OAAOC,MAAMtB,IAG9BuB,QAAS,CAEPrB,eAFJ,WAGUT,KAAKO,GACPP,KAAK+B,QAAQC,KAAK,CAA1B,YAEQhC,KAAK+B,QAAQC,KAAK,CAA1B,8CAKIpB,iBAXJ,WAYMZ,KAAK+B,QAAQC,KAAK,CAAxB,uDAIIL,eAhBJ,WAgBA,WAEA,gCAEM3B,KAAKiC,MAAM,CACTC,OAAQ,MACRC,IAAK,eACLC,OAAQ,CACNC,YAAV,KAGA,kBAEQ,EAAR,kBAOQ,IAJA,IAAR,KACA,gBAGA,oBACU,IAAV,KACU,EAAV,KACU,EAAV,eACU,EAAV,aACU,EAAV,kGACU,EAAV,2BACU,EAAV,uBACU,EAAV,eACU,EAAV,mBACU,EAAV,uBACU,EAAV,iCACU,EAAV,aACU,EAAV,QAGQ,EAAR,OAEQ,IAAR,uBACA,eACY,EAAZ,kBAEY,EAAZ,qBAIA,wBAMIxB,KApEJ,SAoEA,GAEMb,KAAK+B,QAAQC,KAAK,CAChBV,KAAM,aACNO,MAAO,CAAf,wCAKIf,cA7EJ,SA6EA,GACUd,KAAKO,KAGTP,KAAKyB,IAAMa,EAAKb,IAChBzB,KAAK+B,QAAQC,KAAK,CAChBV,KAAM,eACNO,MAAO,CAAf,oCChKuV,I,wBCQnVU,EAAY,eACd,EACAzC,EACAuB,GACA,EACA,KACA,WACA,MAIa,aAAAkB,E,qDCnBf,IAAIC,EAAc,EAAQ,QACtBC,EAAiB,EAAQ,QAAuCC,EAEhEC,EAAoBC,SAASC,UAC7BC,EAA4BH,EAAkBI,SAC9CC,EAAS,wBACTC,EAAO,OAIPT,KAAiBS,KAAQN,IAC3BF,EAAeE,EAAmBM,EAAM,CACtCC,cAAc,EACdC,IAAK,WACH,IACE,OAAOL,EAA0BM,KAAKpD,MAAMqD,MAAML,GAAQ,GAC1D,MAAOM,GACP,MAAO","file":"js/chunk-5cda4078.98bf5a87.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectAddress.vue?vue&type=style&index=0&id=6f48ff6c&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('van-nav-bar',{attrs:{\"title\":this.aa ? '地址管理' : '选择地址',\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.goConfirmOrder}}),_c('div',{staticClass:\"backgroundColor\"}),_c('div',{staticClass:\"address_item_box\"},[_c('div',{staticClass:\"address_item\"},[_c('van-address-list',{attrs:{\"list\":_vm.list,\"switchable\":_vm.switchable,\"default-tag-text\":\"默认\"},on:{\"add\":_vm.goAddAddressPage,\"edit\":_vm.edit,\"select\":_vm.selectaddress},model:{value:(_vm.chosenAddressId),callback:function ($$v) {_vm.chosenAddressId=$$v},expression:\"chosenAddressId\"}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"wrapper\">\r\n    <!-- 顶部导航位置 -->\r\n    <van-nav-bar\r\n      :title=\"this.aa ? '地址管理' : '选择地址'\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"goConfirmOrder\"\r\n    />\r\n    <!-- 顶部蓝色背 -->\r\n    <div class=\"backgroundColor\"></div>\r\n    <!-- 选择地址组件 -->\r\n    <!-- 包裹组件的最大盒子 用于相对定位 -->\r\n    <div class=\"address_item_box\">\r\n      <!-- 包裹所有地址信息列表的盒子  用于绝对定义 -->\r\n      <div class=\"address_item\">\r\n        <!-- 包裹每个组件的盒子  用于制作下边框 -->\r\n        <van-address-list\r\n          v-model=\"chosenAddressId\"\r\n          :list=\"list\"\r\n          :switchable=\"switchable\"\r\n          default-tag-text=\"默认\"\r\n          @add=\"goAddAddressPage\"\r\n          @edit=\"edit\"\r\n          @select=\"selectaddress\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SelectAddress\",\r\n  data() {\r\n    return {\r\n      // 控制单选框的选择\r\n      chosenAddressId: 0,\r\n\r\n      // 在调用获取接口的方法处理后需要渲染的数据\r\n      list: [],\r\n\r\n      // 控制选择地址页面的复选框是否出现\r\n      switchable: true,\r\n\r\n      // 为什么要接收sids的解释\r\n      // 接收从ConfirmOrder选择地址页面传过来的sids,\r\n      // 因为从ConfirmOrder选择地址页面跳转过来, ConfirmOrder选择地址页面的sids会消失,\r\n      // 为什么sids会消失,\r\n      // 因为ConfirmOrder选择地址页面的sids 是从Shopbag购物车跳转到ConfirmOrder页面时传过去的,\r\n      // 所以当ConfirmOrder页面跳转到其他路由时, 再从其他路由回来时, sids将消失,\r\n      // 所以在这个页面所有的跳转都要带着sids\r\n      sids: \"\",\r\n\r\n      // 选择的地址的aid  再点击确认按钮跳转至确定订单页面并将aid传过去\r\n      aid: \"\",\r\n\r\n      // aa 判断是从我的页面进来还是从结算界面进来\r\n      aa: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    // 调用获取接口的方法\r\n    this.getfindAddress();\r\n\r\n    // 为什么要接收sids的解释\r\n    // 接收从ConfirmOrder选择地址页面传过来的sids,\r\n    // 因为从ConfirmOrder选择地址页面跳转过来, ConfirmOrder选择地址页面的sids会消失,\r\n    // 为什么sids会消失,\r\n    // 因为ConfirmOrder选择地址页面的sids 是从Shopbag购物车跳转到ConfirmOrder页面时传过去的,\r\n    // 所以当ConfirmOrder页面跳转到其他路由时, 再从其他路由回来时, sids将消失,\r\n    // 所以在这个页面所有的跳转都要带着sids\r\n    this.sids = this.$route.query.sids;\r\n    this.aa = this.$route.query.aa;\r\n  },\r\n\r\n  methods: {\r\n    // 跳转到ConfirmOrder确认订单页面\r\n    goConfirmOrder() {\r\n      if (this.aa) {\r\n        this.$router.push({ name: \"My\" });\r\n      } else {\r\n        this.$router.push({ name: \"ConfirmOrder\", query: { sids: this.sids } });\r\n      }\r\n    },\r\n\r\n    // 跳转至新建地址页面\r\n    goAddAddressPage() {\r\n      this.$router.push({ name: \"AddAddress\", query: { sids: this.sids ,aa:this.aa} });\r\n    },\r\n\r\n    // 获取已经存在的地址\r\n    getfindAddress() {\r\n      // let tokenString = this.$cookies.get(\"TOKEN\");\r\n       let tokenString =  localStorage.getItem(\"TOKEN\");\r\n\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/findAddress\",\r\n        params: {\r\n          tokenString,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          // 因为后面需要aid, 所以将res.data.result的数据储存起立\r\n          this.res = res.data.result;\r\n          // \r\n          // 把res处理成渲染需要的数据\r\n          let list = [];\r\n          let data = res.data.result;\r\n          // 为了方便获取, 将res.data.result 所有地址存入data\r\n          // 循环data, 將数据循环成渲染需要的格式\r\n          for (let i = 0; i < data.length; i++) {\r\n            let item = {};\r\n            item.id = i;\r\n            item.name = data[i].name;\r\n            item.tel = data[i].tel;\r\n            item.address = `${data[i].province}${data[i].city}${data[i].county}${data[i].addressDetail}`;\r\n            item.isDefault = !!data[i].isDefault;\r\n            item.province = data[i].province;\r\n            item.city = data[i].city;\r\n            item.county = data[i].county;\r\n            item.areaCode = data[i].areaCode;\r\n            item.addressDetail = data[i].addressDetail;\r\n            item.aid = data[i].aid;\r\n            list.push(item);\r\n          }\r\n          // 将处理好的数据赋值给data函数里面的list\r\n          this.list = list;\r\n          \r\n          for(let i = 0 ; i < list.length; i++){\r\n            if(list[i].isDefault){\r\n              this.chosenAddressId = i\r\n            }else{\r\n              this.chosenAddressId = 0\r\n            }\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          \r\n        });\r\n    },\r\n\r\n    // 跳转到编辑地址并且带上aid  这个参数要给设置为可有可无\r\n    edit(item) {\r\n      // \r\n      this.$router.push({\r\n        name: \"AddAddress\",\r\n        query: { aid: item.aid, sids: this.sids, aa: this.aa },\r\n      });\r\n    },\r\n\r\n    //点击选择地址 获取地址的aid\r\n    selectaddress(item) {\r\n      if (this.aa) {\r\n        return\r\n      }\r\n      this.aid = item.aid;\r\n      this.$router.push({\r\n        name: \"ConfirmOrder\",\r\n        query: { aid: this.aid, sids: this.sids },\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// 修改顶部编辑按钮的字样色\r\n/deep/ .van-nav-bar__right .van-nav-bar__text {\r\n  color: #333;\r\n}\r\n\r\n// 修改单选框颜色\r\n/deep/.van-address-item .van-radio__icon--checked .van-icon {\r\n  background: blue;\r\n  border: blue;\r\n}\r\n\r\n// 默认选项的背景颜色\r\n/deep/.van-tag--danger {\r\n  background: blue;\r\n}\r\n// 顶部背景颜色\r\n.backgroundColor {\r\n  width: 100%;\r\n  height: 150px;\r\n  background: blue;\r\n}\r\n\r\n// <!-- 包裹选择地址组件的盒子 -->\r\n.address_item_box {\r\n  position: fixed;\r\n  top: 46px;\r\n  bottom: 49px;\r\n  right: 0;\r\n  left: 0;\r\n  overflow-y: auto;\r\n  .address_item {\r\n    position: absolute;\r\n    margin-top: 20px;\r\n    top: 50px;\r\n    right: 0;\r\n    left: 0;\r\n  }\r\n  // 修改组件van-address-item的圆角\r\n  .van-address-item {\r\n    border-bottom: 1px solid #000;\r\n    border-radius: 10px 10px 0 0;\r\n  }\r\n  //  修改组件新增地址按钮的背景颜色和边框\r\n  .van-button--danger {\r\n    background: blue;\r\n    border: blue;\r\n  }\r\n  // 将包裹着组件新增按钮的盒子背景设置为透明 否则会出翔边框\r\n  /deep/.van-address-list__bottom {\r\n    background-color: transparent;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectAddress.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectAddress.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SelectAddress.vue?vue&type=template&id=6f48ff6c&scoped=true&\"\nimport script from \"./SelectAddress.vue?vue&type=script&lang=js&\"\nexport * from \"./SelectAddress.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SelectAddress.vue?vue&type=style&index=0&id=6f48ff6c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f48ff6c\",\n  null\n  \n)\n\nexport default component.exports","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}