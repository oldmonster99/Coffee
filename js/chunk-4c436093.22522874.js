(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c436093"],{"159b":function(t,a,s){var i=s("da84"),e=s("fdbc"),r=s("17c2"),n=s("9112");for(var c in e){var o=i[c],d=o&&o.prototype;if(d&&d.forEach!==r)try{n(d,"forEach",r)}catch(l){d.forEach=r}}},"17c2":function(t,a,s){"use strict";var i=s("b727").forEach,e=s("a640"),r=e("forEach");t.exports=r?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"226b":function(t,a,s){},"30c7":function(t,a,s){"use strict";var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"background"}),s("div",{staticClass:"content"},[s("div",{staticClass:"c_content"},[t._t("default")],2)])])},e=[],r={name:"Bg"},n=r,c=(s("90a9"),s("2877")),o=Object(c["a"])(n,i,e,!1,null,"869b25e2",null);a["a"]=o.exports},3394:function(t,a,s){"use strict";s("226b")},"5bbb":function(t,a,s){"use strict";var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"pro_list"},[s("van-swipe-cell",{attrs:{disabled:!t.isSlide},scopedSlots:t._u([{key:"right",fn:function(){return[s("van-button",{attrs:{square:"",type:"danger",text:"删除"},on:{click:t.remove}})]},proxy:!0}])},[s("div",{staticClass:"pro_item"},[t.isHasCheckbox?s("div",{staticClass:"pro_checkbox"},[s("van-checkbox",{on:{change:function(a){return t.simpleSelect(t.proData.checked)}},model:{value:t.proData.checked,callback:function(a){t.$set(t.proData,"checked",a)},expression:"proData.checked"}})],1):t._e(),s("div",{staticClass:"pro_img"},[s("img",{attrs:{src:t.proData.small_img,alt:""}})]),s("div",{staticClass:"pro_box"},[s("div",{staticClass:"pro_name"},[s("div",{staticClass:"pro_name_chinese"},[s("span",{staticClass:"pro_name_big"},[t._v(t._s(t.proData.name))]),s("span",{staticClass:"pro_name_sm"},[t._v(t._s(t.proData.rule))])]),s("div",{staticClass:"pro_name_enname"},[t._v(t._s(t.proData.enname))])]),s("div",{staticClass:"pro_price"},[s("div",{staticClass:"pro_price_left"},[t._v("¥"+t._s(t.proData.price))]),s("div",{staticClass:"pro_price_right"},[t._t("default")],2)])])])])],1)},e=[],r={name:"ProList",props:{proData:{type:Object,default:function(){return{}}},isSlide:{type:Boolean,default:!1},isHasCheckbox:{type:Boolean,default:!0}},data:function(){return{checked:!1}},methods:{simpleSelect:function(t){this.$emit("simpleSelect",{checkbox:t})},remove:function(){this.$emit("remove")}}},n=r,c=(s("3394"),s("2877")),o=Object(c["a"])(n,i,e,!1,null,"07272e06",null);a["a"]=o.exports},"6a6c":function(t,a,s){},"7d27":function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",[s("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":""},on:{"click-left":function(a){return t.goMy()}}})],1),s("div",[s("Bg",{},[s("van-tabs",{staticClass:"all",on:{click:function(a){return t.findOrder()}},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[s("van-tab",{attrs:{title:"全部"}},[s("div",{staticClass:"content"},t._l(t.OrderDatas,(function(a,i){return s("div",{key:i,staticClass:"list"},[s("div",{staticClass:"ProidAndStatusBox"},[s("div",{staticClass:"Proid"},[t._v(t._s(a.oid))]),1===a.status?s("div",{staticClass:"status",on:{click:function(s){return t.receive(a.oid)}}},[t._v(" 确认订单 ")]):t._e(),2===a.status?s("div",{staticClass:"status",on:{click:function(s){return t.removeOrder(a.oid)}}},[t._v(" 已完成 "),s("van-icon",{attrs:{name:"delete"}})],1):t._e()]),t._l(a.data,(function(a,i){return s("ProList",{key:i,attrs:{isHasCheckbox:!1,proData:a}},[s("div",[t._v("x"+t._s(a.count))])])})),s("div",{staticClass:"dividing"}),s("div",{staticClass:"Order_Info"},[s("div",{staticClass:"Order_time"},[t._v("2021-20-20 15:05:15")]),s("div",{staticClass:"Order_num_price"},[s("div",{staticClass:"Order_num"},[t._v("共计 "+t._s(a.num)+" 件")]),s("div",{staticClass:"Order_price"},[t._v("合计 ¥ "+t._s(a.total))])])])],2)})),0)]),s("van-tab",{attrs:{title:"进行中"}},[s("div",{staticClass:"content"},t._l(t.OrderDatas,(function(a,i){return s("div",{key:i,staticClass:"list"},[s("div",{staticClass:"ProidAndStatusBox"},[s("div",{staticClass:"Proid"},[t._v(t._s(a.oid))]),1===a.status?s("div",{staticClass:"status",on:{click:function(s){return t.receive(a.oid)}}},[t._v("确认订单")]):t._e(),2===a.status?s("div",{staticClass:"status",on:{click:function(s){return t.removeOrder(a.oid)}}},[t._v(" 已完成 "),s("van-icon",{attrs:{name:"delete"}})],1):t._e()]),t._l(a.data,(function(a,i){return s("ProList",{key:i,attrs:{isHasCheckbox:!1,proData:a}},[s("div",[t._v("x"+t._s(a.count))])])})),s("div",{staticClass:"dividing"}),s("div",{staticClass:"Order_Info"},[s("div",{staticClass:"Order_time"},[t._v("2021-20-20 15:05:15")]),s("div",{staticClass:"Order_num_price"},[s("div",{staticClass:"Order_num"},[t._v("共计 "+t._s(a.num)+" 件")]),s("div",{staticClass:"Order_price"},[t._v("合计 ¥ "+t._s(a.total))])])])],2)})),0)]),s("van-tab",{attrs:{title:"已完成"}},[s("div",{staticClass:"content"},t._l(t.OrderDatas,(function(a,i){return s("div",{key:i,staticClass:"list"},[s("div",{staticClass:"ProidAndStatusBox"},[s("div",{staticClass:"Proid"},[t._v(t._s(a.oid))]),1===a.status?s("div",{staticClass:"status"},[t._v("确定订单")]):t._e(),2===a.status?s("div",{staticClass:"status",on:{click:function(s){return t.removeOrder(a.oid)}}},[t._v(" 已完成 "),s("van-icon",{attrs:{name:"delete"}})],1):t._e()]),t._l(a.data,(function(a,i){return s("ProList",{key:i,attrs:{isHasCheckbox:!1,proData:a}},[s("div",[t._v("x"+t._s(a.count))])])})),s("div",{staticClass:"dividing"}),s("div",{staticClass:"Order_Info"},[s("div",{staticClass:"Order_time"},[t._v("2021-20-20 15:05:15")]),s("div",{staticClass:"Order_num_price"},[s("div",{staticClass:"Order_num"},[t._v("共计 "+t._s(a.num)+" 件")]),s("div",{staticClass:"Order_price"},[t._v("合计 ¥ "+t._s(a.total))])])])],2)})),0)])],1)],1)],1)])},e=[],r=(s("159b"),s("5bbb")),n=s("30c7"),c={name:"MyOrder",components:{Bg:n["a"],ProList:r["a"],bb:""},data:function(){return{active:0,OrderDatas:[]}},created:function(){this.bb=this.$route.query.bb,this.findOrder()},methods:{goMy:function(){this.bb?this.$router.push({name:"Shopbag"}):this.$router.push({name:"My"})},findOrder:function(){var t=this,a=localStorage.getItem("TOKEN");this.axios({method:"get",url:"/findOrder",params:{tokenString:a,status:this.active}}).then((function(a){if(7e4===a.data.code){var s=[];a.data.result.forEach((function(t){t.small_img=t.smallImg,delete t.smallImg,-1===s.indexOf(t.oid)&&s.push(t.oid)}));var i=[];s.forEach((function(t){var s={oid:t,status:"",num:0,total:0,data:[],time:""};a.data.result.forEach((function(a){t===a.oid&&(s.time||(s.time=a.createdAt),s.data.push(a),s.status=a.status,s.num+=a.count,s.total+=a.count*a.price)})),i.push(s)})),t.OrderDatas=i}})).catch((function(t){}))},receive:function(t){var a=this,s=localStorage.getItem("TOKEN");this.axios({method:"post",url:"/receive",data:{tokenString:s,oid:t}}).then((function(t){a.$toast(t.data.msg),8e4===t.data.code&&a.findOrder()})).catch((function(t){}))},removeOrder:function(t){var a=this,s=localStorage.getItem("TOKEN");this.axios({method:"post",url:"/removeOrder",data:{tokenString:s,oid:t}}).then((function(t){a.$toast(t.data.msg),9e4===t.data.code&&a.findOrder()})).catch((function(t){}))}}},o=c,d=(s("a036"),s("2877")),l=Object(d["a"])(o,i,e,!1,null,"e1f27cae",null);a["default"]=l.exports},"90a9":function(t,a,s){"use strict";s("6a6c")},9994:function(t,a,s){},a036:function(t,a,s){"use strict";s("9994")},a640:function(t,a,s){"use strict";var i=s("d039");t.exports=function(t,a){var s=[][t];return!!s&&i((function(){s.call(null,a||function(){throw 1},1)}))}},b727:function(t,a,s){var i=s("0366"),e=s("44ad"),r=s("7b0b"),n=s("50c4"),c=s("65f0"),o=[].push,d=function(t){var a=1==t,s=2==t,d=3==t,l=4==t,u=6==t,v=7==t,f=5==t||u;return function(_,p,m,h){for(var C,b,O=r(_),k=e(O),g=i(p,m,3),x=n(k.length),y=0,D=h||c,E=a?D(_,x):s||v?D(_,0):void 0;x>y;y++)if((f||y in k)&&(C=k[y],b=g(C,y,O),t))if(a)E[y]=b;else if(b)switch(t){case 3:return!0;case 5:return C;case 6:return y;case 2:o.call(E,C)}else switch(t){case 4:return!1;case 7:o.call(E,C)}return u?-1:d||l?l:E}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterOut:d(7)}}}]);
//# sourceMappingURL=chunk-4c436093.22522874.js.map